# Alpha

## 1.0
**`BABA MAKE PARABOX`**更新于 2024.07.05。

+ 添加。
    + ~~上一行的“添加”指的是**Baba Make Parabox**游戏自身，是不是感觉很META？:)~~

### 1.1
**`KEKE IS MOVE`**更新于 2024.07.06。

+ **规则**
    + **属性**
        + **`MOVE`**
            + 添加。
+ **控制**
    + 现在可以撤回操作或重新开始了。

#### 1.11
该版本更新于 2024.07.06。

+ **控制**
    + 现在可以切换世界了。

### 1.2
**`FLAG IS WIN`**更新于 2024.07.06。

+ **规则**
    + **属性**
        + **`WIN`**
            + 添加。
+ **技术性**
    + 添加了使用Pyinstaller制作的Windows应用程序。

### 1.3
**`BABA IS KEKE`**更新于 2024.07.06。

+ **规则**
    + 现在可以转变物体了。
+ **世界**
    + _现在可以正常进出。_

#### 1.31
该版本更新于 2024.07.07。

+ **世界**
    + 现在有固定颜色了。
+ **终端**
    + _用途增多。_

### 1.4
该版本更新于 2024.07.07。

+ _与制作世界相关的更改。_

#### 1.41
该版本更新于 2024.07.07。

+ _与关卡（也有可能是世界）相关的更改。_

#### 1.42
该版本更新于 2024.07.08。

+ **技术性**
    + 优化了代码。

### 1.5
**`WATER IS SINK`**更新于 2024.07.08。

+ **规则**
    + **属性**
        + **`FLOAT`，`SINK`，和`DEFEAT`**
            + 添加。

### 1.6
**`DOOR IS SHUT`**更新于 2024.07.08。

+ **规则**
    + **属性**
        + **`OPEN`和`SHUT`**
            + 添加。

### 1.7
**`ICE IS MELT`**更新于 2024.07.09。

+ **规则**
    + **属性**
        + **`HOT`和`MELT`**
            + 添加。
+ **外观**
    + 纹理现在会被染成默认颜色了。

### 1.8
**`ROCK IS TELE`**更新于 2024.07.10。

+ **规则**
    + **属性**
        + **`SHIFT`，`TELE`，和`WORD`**
            + 添加。
+ **外观**
    + 新增了游戏图标。

#### 1.81
该版本更新于 2024.07.10。
+ **技术性**
    + _与程序参数相关的更改。_

### 1.9
**`IMAGE IS WOBBLE`**更新于 2024.07.10。

+ **外观**
    + 纹理现在能“扭动”了。
+ **技术性**
    + 优化了代码。

#### 1.91
该版本更新于 2024.07.10。

+ **漏洞**
    + 修复了纹理名称和纹理颜色使用同一标识符，导致`Lava`使用了`Water`的颜色，进而导致二者无外观区别的漏洞。
+ **技术性**
    + _用于物体坐标的两个数值可以被同时读取/写入了。_

## 2.0
**`LEVEL IS NOT WORLD`**更新于 2024.07.11。

+ **规则**
    + **物体`Cursor`与其所对应的名词，以及属性`SELECT`**
        + 添加。
        + 用于选择关卡。
+ **关卡**
    + 首次作为与**世界**不同的独立概念存在于游戏内。

### 2.1
**`WORLD IS LEVEL`**更新于 2024.07.11。

+ **规则**
    + _关卡与世界现在可以相互转换了。_
+ **漏洞**
    + 修复了许多漏洞。

#### 2.11
该版本更新于 2024.07.12。

+ **漏洞**
    + 修复了有关撤回和重开的漏洞。

#### 2.12
该版本更新于 2024.07.12。

+ 在代码中加入了许多物体。

#### 2.13
该版本更新于 2024.07.12。

+ **控制**
    + 现在可以按`Esc`键回到上层关卡了。

### 2.2
该版本更新于 2024.07.12。

+ **技术性**
    + 改进了有关世界移动的代码。
+ _有关选项的部分改动。_

#### 2.21
**`PATRICK IS YOU`**更新于 2024.07.12。

+ **规则**
    + **物体`Patrick`与其所对应的名词**
        + 添加。
        + ~~纹理是用`Square`和`Text_Banana`改的。~~
+ **漏洞**
    + 修复了一些漏洞。

#### 2.22
该版本更新于 2024.07.12。

### 2.3
**`BABA IS NOT YOU`**更新于 2024.07.13。

+ **规则**
    + **否定词`NOT`**
        + 添加。
        + 可以否定属性词。
    + 现在外部世界的规则会被应用到内部世界里了。

#### 2.31
该版本更新于 2024.07.14。

+ **规则**
    + **属性**
        + **`YOU`**
            + 支持操作多个角色。

### 2.4
**`LEVEL IS BABA`**更新于 2024.07.14。

+ **规则**
    + **否定词`NOT`**
        + 现在支持对名词取反。
+ **世界**
    + 现在可以转为其他物体。

#### 2.41
该版本更新于 2024.07.14。

+ **漏洞**
    + 修复了与世界和移动有关的漏洞。

#### 2.42
**`WORLD IS YOU`**更新于 2024.07.14。

+ **世界**
    + 现在可以添加属性。

#### 2.43
**`BABA IS YOU AND WIN`**更新于 2024.07.15。

+ **规则**
    + **属性**
        + 现在同时拥有`YOU`和`WIN`两个属性的物体也能判定胜利了。

### 2.5
**`LEVEL HAS ICON AND COLOR`**更新于 2024.07.15。

+ **关卡**
    + 关卡物体现在可以附带图标和颜色了。
+ **编辑器**
    + 优化了部分控制按键。

#### 2.51
该版本更新于 2024.07.15。

+ **世界**
    + 世界物体现在可以与`WORD`正常作用了。
+ 再次加入了许多物体。

#### 2.52
该版本更新于 2024.07.15。

+ **技术性**
    + 再次改进了有关世界移动的代码。

### 2.6
该版本更新于 2024.07.16。

+ **编辑器**
    + 大幅度优化了控制。

#### 2.61
该版本更新于 2024.07.16。

+ **编辑器**
    + 添加了10个调色盘栏位。

### 2.7
该版本更新于 2024.07.16。

+ **终端**
    + 新增了翻译系统。

### 2.8
**`BABA AND KEKE IS YOU AND ME`**更新于 2024.07.16。

+ **规则**
    + **并列词`AND`**
        + 添加。

#### 2.81
该版本更新于 2024.07.17。

+ **漏洞**
    + 修复了一些漏洞。

#### 2.82
该版本更新于 2024.07.18。

+ **技术性**
    + JSON文件里的颜色信息现在使用整数而非字符串来存储。

### 2.9
**`FLAG IS END`**更新于 2024.07.18。

+ **规则**
    + **属性**
        + **`END`**
            + 添加。
+ **控制**
    + 现在按住`F1`可以显示每秒帧数了。
+ **外观**
    + 窗口可以自由调整大小了。
    + 加入了简单的音效系统。

#### 2.91
**`ALL IS MOVE`**更新于 2024.07.18。

+ **规则**
    + **_名词`ALL`_**
        + _添加。_

## 3.0
**`GAME IS YOU`**更新于 2024.07.19。

+ **规则**
    + **名词`GAME`**
        + 添加。
        + 指代游戏进程或游戏窗口，会被部分属性影响。
            + 效果包括移动画面，退出或启动新的游戏进程等。
            + 不建议作为解谜的重要部分。

##### 3.001
该版本更新于 2024.07.19。

+ **外观**
    + 游戏现在支持播放MIDI音乐了。
+ **漏洞**
    + 修复了`GAME IS SINK`或`GAME IS FLOAT`产生的游戏画面滚动速度在规则消失后仍被保留导致屏幕根本停不下来的漏洞。

##### 3.002
该版本更新于 2024.07.19。

+ **技术性**
    + 又一次改进了有关世界移动的代码，函数的运行速度变得更快了。

##### 3.003
该版本更新于 2024.07.19。

+ **漏洞**
    + 修复了编辑器内粘贴的所有物体都使用了与被复制的物体相等的UUID导致的漏洞。

#### 3.01
**`WORD IS TEXT`**更新于 2024.07.20。

+ **规则**
    + `WORD`属性现在能对`TEXT`生效了。
        + 目前这会导致所有文本都会被同时解析为名词`TEXT`。

##### 3.011
该版本更新于 2024.07.20。

+ **技术性**
    + **`rules.to_atom_rules`**
        + _添加。_

##### 3.012
该版本更新于 2024.07.20。

+ **规则**
    + `GAME IS STOP`现在会禁用纹理动画。

#### 3.02
该版本更新于 2024.07.20。

+ **规则**
    + **否定词`NOT`**
        + _现在支持同时作用在名词和属性词上。_

### 3.1
**`FLAG ON ROCK IS WIN`**更新于 2024.07.21。

+ **规则**
    + **修饰词**
        + 添加。
        + **中缀修饰词`ON`**
            + 添加。

#### 3.11
**`ROCK FEELING PUSH IS NOT PUSH`**更新于 2024.07.21。

+ **规则**
    + **中缀修饰词`FEELING`**
        + 添加。
        + 由于目前的系统无法判断“无限循环”，`FEELING`被设计为一轮只判断一次。
            + ~~说白了就是我菜。~~

##### 3.111
该版本更新于 2024.07.21。

+ **漏洞**
    + 修复了对`GAME`修饰`FEELING`导致的漏洞。

##### 3.112
该版本更新于 2024.07.22。

+ **漏洞**
    + 修复了对一个物体同时修饰`SHUT`和`OPEN`导致的漏洞。

#### 3.12
**`WIDTH IS NOT HEIGHT`**更新于 2024.07.22。
+ **世界**
    + 现在世界的两个边长可以不相等了。

##### 3.121
该版本更新于 2024.07.22。

+ **漏洞**
    + 修复了某个漏洞。

#### 3.13
该版本更新于 2024.07.23。

+ **世界**
    + 现在可以拥有全局属性了。

##### 3.131
该版本更新于 2024.07.23。

##### 3.132
该版本更新于 2024.07.23。

+ **外观**
    + _游戏现在默认开启MIDI音乐了，且可以在选项内更改。_

#### 3.14
**`NOT META WORLD IS PUSH`**更新于 2024.07.23。

+ **规则**
    + **前缀修饰词**
        + _添加。_
        + **`META`**
            + 添加。
            + 用于限制所指代的对象为仅非常规物体。

##### 3.141
该版本更新于 2024.07.23。

+ **规则**
    + 现在经`META`修饰后的对象也支持变换了。

##### 3.142
该版本更新于 2024.07.24。

+ **漏洞**
    + 修复了有关中缀修饰词的漏洞。

#### 3.15
**`BABA NEAR KEKE IS ME`**更新于 2024.07.24。

+ **规则**
    + **中缀修饰词`NEAR`**
        + 添加。

##### 3.151
该版本更新于 2024.07.24。

+ **漏洞**
    + 再次修复了对物体同时修饰`SHUT`和`OPEN`导致的漏洞。

#### 3.16
该版本更新于 2024.07.24。

+ **控制**
    + 按住的按键不再被多次识别。

##### 3.161
**`GAME ON LINUX IS OPEN`**更新于 2024.07.25。

+ **游戏**
    + 现在正式兼容Linux。
        + 之前部分版本的源代码或许也能在Linux上运作，但从这个版本开始BabaMakeParabox在添加代码时会考虑平台间的兼容性。

##### 3.162
该版本更新于 2024.07.25。

+ **漏洞**
    + 修复了有关文本的漏洞。

### 3.2
**`BABA MAKE PATRICK AND HAS BOX AND WRITE WIN`**更新于 2024.07.26。

+ **规则**
    + **操作词`MAKE`，`HAS`，和`WRITE`**
        + 添加。

##### 3.201
该版本更新于 2024.07.26。

+ **控制**
    + `F1`改为切换帧率显示。
+ **技术性**
    + 大量引入`typing`模块的`TypedDict`以进行更好的类型标注。
        + ~~但还是有许多地方没能省去`# type: ignore`。~~
    + **`spaces.Orient`**
        + 添加。
        + 描述方向的枚举。
    + **`objects.nouns_objs_dicts`**
        + **`swapped`**
            + 添加。
        + **`get_obj`**
            + 重命名为`get`。
        + **`get_exist_obj`**
            + 重命名为`__getitem__`。

##### 3.202
该版本更新于 2024.07.27。

+ **技术性**
    + 选项现在会记录版本号。
    + 删除了选项中的`input_cooldown`。

#### 3.21
该版本更新于 2024.07.31。

+ **技术性**
    + 关卡现在会记录版本号。
    + **`objects.Object`**
        + 重命名为`objects.BmpObj`。
        + **`json_name`**
            + 添加。
            + 替代`typename`用于JSON格式内的物体名称，且使用类似 Baba Is You 的下划线命名法（`text_baba`）。

##### 3.211
该版本更新于 2024.08.01。

+ **技术性**
    + **`objects.BmpObj`**
        + 重命名为`objects.BmpObject`。
        + 移除了所有子类的`__eq__`魔术方法。
    + **`worlds.world`，`levels.level`，`levelpacks.levelpack`**+
        + 重命名，类名的首字母现在为大写。

### 3.3
**`TEXT_BABA IS YOU`**更新于 2024.08.01。

+ **规则**
    + **元文本**
        + 添加。
        + 外观为带有半透明数字的文本，数字大小即为元文本等级（额外的`text_`数量）。
+ **技术性**
    + **`objects.BmpObject`**
        + **`json_name`**
            + 移除。
        + 用作文本的类（`BABA`）现在以带`Text`前缀的大驼峰命名法来命名（`TextBaba`）。
    + **`objects.Noun.obj_type`**
        + 添加。
    + **`objects.WorldPointer.inf_tier`**
        + 重命名为`infinite_tier`。
    + **`objects.Metatext`**
        + 添加。
        + 元文本的基类。

#### 3.31
**`TEXT_ BABA IS TEXT_ TEXT_ BABA`**更新于 2024.08.01。

+ **规则**
    + **元文本修饰词`TEXT_`**
        + 添加。
            + **技术性**：`objects.TextText_`并不是`objects.Prefix`的子类。

##### 3.311
该版本更新于 2024.08.02。

+ **编辑器**
    + 右上角的类型显示现在支持特殊物体的独特显示。
+ **漏洞**
    + 修复了不同的世界可以有多个对应相同世界的世界物体的漏洞。
        + 将方法`repeated_world_to_clone`从`worlds.World`移动到`levels.Level`。
    + 修复了窗口渲染的部分位置只参考了其中一个边长数据导致渲染不正确的的漏洞。

#### 3.32
**`TEXT IS TEXT-`**更新于 2024.08.02。

+ **规则**
    + **属性`TEXT+`和`TEXT-`**
        + 添加。
        + 改变物体为其名词，或改变名词为其物体。支持元文本。
+ **技术性**
    + **`objects.BmpObject.display_name`**
        + 添加。
        + 用于显示物体名称。
            + 普通物体使用大驼峰，名词使用全大写下划线。

##### 3.321
该版本更新于 2024.08.07。

+ **外观**
    + 部分位置的纹理不再使用默认颜色。
    + 编辑器内的元文本也会显示等级了。

### 3.4
**`ROCK HAS LEVEL AND WORLD`**更新于 2024.08.07。

+ **规则**
    + 现在任何物体都能存储“该物体所指向的世界和/或关卡的标识符”了。
        + 这使得普通物体与引用物体相互转换时会保留更多的信息，且有可能在反向转换后仍然生效。
+ **技术性**
    + **`objects.WorldPointerExtraJson`**
        + 添加。
    + **`basics.compare_versions`**
        + 添加。
        + 比较版本名的先后顺序。

##### 3.401
**`GAME IS DONE`**更新于 2024.08.07。

+ **规则**
    + **属性`END`和`DONE`**
        + 添加。
        + 用于关卡包~~和游戏~~的结局。
            + ~~`GAME IS DONE`会在选项里写入`"game_is_done": true`，程序读取到该选项后会崩溃。~~
+ **技术性**
    + **`games.GameIsDoneError`**
        + 添加。

#### 3.41
该版本更新于 2024.08.09。

+ **游戏**
    + 历史记录现在以关卡为单位。
+ **技术性**
    + **`levels.Level.is_map`**
        + 添加。
        + 决定该关卡是否被用作大地图。

### 3.5
**`ENTER AND LEAVE`**更新于 2024.08.24，添加了用于控制能否在世界之间转移物体的两个属性。

+ **规则**
    + **物体`Line`和`Dot`，以及与其所对应的名词**
        + 添加。
    + **属性`ENTER`和`LEAVE`**
        + 添加。
        + 该属性被否定的物体无法自由进出世界。

### 3.6
**`LEVEL IS WEAK`**更新于 2024.09.11，将处理游戏回合计算过程的任务从之前版本的关卡内部放到了关卡包的内部。

+ **技术性**
    + 许多原本属于`levels.Level`的方法被搬到了`levelpacks.Levelpack`内部（例如`turn`和`transform`），以省略在两者之间传递信息的步骤。
    + **`levels.Level.same_float_prop`**
        + 由于不涉及关卡信息，将该方法挪至`objects`。
+ **漏洞**
    + 该版本有大量严重漏洞。

#### 3.61
**`WORLD IS MORE`**更新于 2024.09.12，添加了对多个世界物体的支持，且提升了游戏的运行速度。

+ **世界**
    + 多个指向相同世界的世界物体可以同时存在了。
        + 从这些世界离开的物体会被复制。
            + 该版本的复制功能有漏洞，被复制的物体会使用相同的UUID，进而导致其他漏洞。
        + 与外层世界有关的逻辑也被一并更改。
+ **技术性**
    + **`levels.Level.get_move_list`**
        + 移除了 _不知何时加入的_ 参数`cause`。
    + **`worlds.World`**
        + 加入了使用位置索引获取物体的功能，从而大幅度提升了游戏运行速度。
            + ~~代价就是更容易出现漏洞了。~~

##### 3.611
该版本更新于 2024.09.13，修复了一些漏洞。

+ **漏洞**
    + 修复了列表`__all__`里没有`"levelpacks"`的漏洞。
    + 修复了`WORLD IS YOU` / `LEVEL IS YOU`会使玩家可以控制范围内的所有物体的非预期行为漏洞。

#### 3.62
该版本更新于 2024.10.21，修复了一个漏洞。

+ **漏洞**
    + 修复了有关中缀修饰词的漏洞。
+ **技术性**
    + 移除了在3.611版本用于调试的`print`函数。

##### 3.621
**`SELDOM AND OFTEN`**更新于 2024.10.22，添加了两个与概率有关的前缀和一个中缀，且加强了命令行的错误处理能力。

+ **规则**
    + **前缀修饰词`SELDOM`和`OFTEN`，中缀修饰词`WITHOUT`**
        + 添加。
    + 更改了中缀修饰词的判定方式。
+ **终端**
    + 多数非预期输入现在不会使程序崩溃，而是会要求玩家重新输入了。

##### 3.622
该版本更新于 2024.10.23，修复了一个严重漏洞。

+ **漏洞**
    + 修复了部分代码在使用`for`循环遍历`dict`类型时没有使用`dict.items`方法而导致的严重漏洞。
+ **技术性**
    + 移除了代码仓库里的纹理等资源。
    + **`rules.PropertyDict`**
        + 添加。
        + 用于储存属性。
    + ~~在`__init__.py`里加入了一行极其明显的注释。放心，没那么严重。~~

##### 3.623
该版本更新于 2024.11.26，重命名了许多带有游戏名的文件。

### 3.7
**`YOU AND YOU AND NOT YOU`**更新于 2024.11.27，添加了对多重属性的支持，加入了新的否定词`NEG`，并优化了许多以前版本产生的大量冗余且杂乱的代码。

+ **规则**
    + **属性**
        + 现在可以（内在的，而不是空间上的）堆叠，被堆叠的属性可能会增强或被多次应用。
    + **杂项**
        + **`NEG`**
            + 添加。
            + 类似于`NOT`，用于更为宽松的否定用途。
                + ~~这词在代码里总共也就存在了一天的时间，甚至连设定都是残废状态……~~
+ **技术性**
    + **`rules.analysis_rule`，`get_rules_from_pos_and_orient`**
        + 彻底重写。
            + ~~这下不仅很快就能理解，还容易扩展多了。~~
    + **`objects.Properties`**
        + 添加。
        + 用于系统化管理物体，世界，关卡和“游戏”的一般属性，同时附带管理其余运算符文本所添加的特殊属性的功能。
        + 替代`rules.PropertyDict`。
            + ~~同时也替代了多个毫不相干的类型中几乎所有用于存储属性词的硬编码变量。~~
    + **`objects.Game`**
        + 现在作为“用于指出需要创建新窗口的临时物体”的类被使用，而不再仅是`objects.TextGame`的指代对象。
    + **`basics.get_json_dump_kwds`**
        + 添加。
            + ~~但被我忘了……~~
        + 用于获取JSON文件的存储格式参数（是否格式化）。
    + **`objects.BmpObject.set_sprite`**
        + 现在可以接受并忽略多余的关键词参数，以简化纹理显示流程。
    + **`objects.get_noun_from_obj`**
        + 重命名为`objects.get_noun_from_type`。
    + **`objects.Transform`和`objects.Sprite`**
        + 移除。
        + ~~旧版本的遗留。~~
    + 将许多零散的相似代码提取到了新的函数中，或者用条件分支取代。
        + 变化幅度较大的部分包括`levels.Level.update_rules`，`games.play`等。
    + 将用于处理特殊转换的代码从`levelpacks.Levelpack.transform`移至`levelpacks.Levelpack.special_transform`。
    + 异常`games.GameIsDoneError`不再使用翻译文本。
    + 移除了函数`games.play`内的许多冗余变量。

##### 3.701
该版本更新于 2024.11.28，回退了 3.7 内对`NOT`的更改，移除了`NEG`，改善了命令行界面的显示与操作，并整理了以前版本产生的杂乱代码。

+ **规则**
    + **杂项**
        + **`NEG`**
            + 移除。~~对此我只能说，删的真™好。~~
+ **终端**
    + 现在部分情况下（选择关卡包文件等）会自动显示文件夹内的指定类型文件。
    + 输入文件名时又需要包含后缀名了。
    + 更新了许多文本。
    + **分隔线**
        + 添加。
        + 用于标注一段新的文本的开始。
+ **漏洞**
    + 部分还原了`3.7`中对`NOT`的更改。
+ **技术性**
    + **`languages.lang_print`和`languages.lang_input`**
        + 添加。
        + 用于输出格式化翻译文本和使用格式化翻译文本请求输入的自定义函数。
    + **`games`**
        + 重命名为`plays`。
    + **`subgames`**
        + 重命名为`subs`。
    + **`rules.RuleInfo.noun_negated_list`和`rules.RuleInfo.prop_negated_list`**
        + 重新用于存储否定次数而非否定词列表，且因此重命名`list`到`tier`。
    + 游戏图标的文件名不再包含多余的后缀。
    + 启动器的许多逻辑被拆分到了新的函数内部。

##### 3.702
该版本更新于 2024.11.29，整理了以前版本产生的杂乱代码，修复了一些漏洞。

+ **终端**
    + **分隔线**
        + 现在可附带标题。
    + 更新了部分文本。
    + 将翻译字段内的`main`重命名为`launch`。
+ **漏洞**
    + 修复了没有被显式赋予`ENTER`/`LEAVE`属性的物体无法进入/退出世界的漏洞。
    + 修复了尽管子游戏所用的程序名已经被重命名，但代码内的常量并未同步改动，导致将其他物体转换为`GAME`无法产生新窗口的漏洞。
+ **技术性**
    + **`objects.Properties`**
        + **`enabled`，`disabled`**
            + 添加。
        + `calc_count`现在会单独处理简单的情况，在简单情况下可能会使性能提升。
    + **`languages.lang_format`**
        + 添加。
        + 单独用于格式化翻译文本的自定义函数。
    + **`basics.get_json_dump_kwds`**
        + 在添加后首次被使用。
    + **`levels.Level.find_rules`**
        + 移除。
    + **`objects.temp_calc`**
        + 移除。
        + ~~曾用于测试否定词新逻辑，且未被及时删除的临时函数。~~
    + 移除了部分无用函数。
    + 再次拆分了启动器的逻辑。

### 3.8
**`ORB IS BONUS`**更新于 2024.12.02，为了新的关卡选择机制而加入了用于限制光标物体的路径物体和收集物系统，并修复了一些漏洞。

+ **规则**
    + **物体`Path`与其所对应的名词**
        + 添加。
        + 直接用于`SELECT`物体的移动判定。
        + 可锁定，也可设置解锁条件。
        + 暂时使用`Line`的纹理。
        + 暂未考虑使用`PATH`文本组成规则的特殊情况，这可能会导致漏洞，相关特性将会在近几个版本中实现。
    + **收集物**
        + 添加。
        + 会在特殊情况下添加到关卡包中。
        + 可用于解锁`Path`。
    + **物体`Orb`与其所对应的名词，以及属性`BONUS`**
        + 添加。
        + 用于收集物。
            + 默认规则没有使用`BONUS`，物体`Orb`也没有默认属性。
    + **属性`HIDE`**
        + 添加。
        + 暂无作用。
            + 之后将用于隐藏物体。
+ **编辑器**
    + 快捷键`T`改为用于编辑关卡或世界的标识符，这意味着现在可以在编辑器内可以同时更改世界的无限等级了。
+ **漏洞**
    + 部分修复了读取关卡包时错误的物体类型名称会导致游戏尝试持续生成元文本以找到匹配的名称，导致函数调用栈溢出，程序崩溃的漏洞。
        + 现在游戏会优先检测名称开头是否为`text_text_`。~~这并没有完全修复该漏洞，只是使其变得更罕见了而已。~~
    + 修复了在编辑器内按`Q`或`E`切换物体类型时可能切换到本被设定为编辑器不可用的物体的漏洞。
+ **技术性**
    + **`refs`**
        + 添加。
        + 用于定义需要在代码各处使用的引用变量的类，以避免循环依赖。
            + 同时大幅度更改了关卡包的JSON存储格式。
    + **`collects`**
        + 添加。
        + 收集物相关代码。
    + **`objects.BmpObject`**
        + 添加了对缺省的类属性进行初始化的过程。
        + **`objects.Noun`**
            + 除了`obj_type`，其他类属性现在都可以默认省略了。
        + **`objects.BmpObject.sprite_color`**
            + 取代`displays.sprite_colors`。
    + **`levels.Level.show_world`**
        + 新增参数`debug`，目前用于在编辑器视角显示更多细节。
    + **`levelpacks.Levelpack.prepare`**
        + 从函数`levelpacks.Levelpack.turn`中拆出。
    + **`levelpacks.Levelpack.get_exist_level`**
        + 重命名为`get_exact_level`。

#### 3.81
该版本更新于 2024.12.03，更改了许多控制键位，并修复了一些漏洞。

+ **游戏**
    + 历史记录现在保存整个关卡包。
    + 将赢得关卡等特殊事件后的 1 秒冷却时间改为按移动键或等待键继续。
        + 此时仍然可以进行撤回等操作。
    + 支持在游戏中途进行临时存档与读档。
        + 临时存档会保存在游戏缓存中，而不会写入到文件；关闭游戏时所有的临时存档都会丢失。
    + 更新键位：
        + **`W` / `S` / `A` / `D`**：移动
        + **`SPACE`**：等待
        + **`ESC`**：回到上层关卡
        + **`Z`**：撤销
        + **`CTRL` + `R`**：重新开始关卡包
        + **`O`**：载入临时存档
            + **`CTRL` + `...`**：可指定此临时存档的名字
        + **`P`**：保存临时存档
            + **`CTRL` + `...`**：可指定此临时存档的名字
        + **`TAB`**：显示各种信息
        + **`-` / `=`**：循环选择世界
+ **编辑器**
    + 更新键位：
        + **`W` / `S` / `A` / `D`**：移动光标
            + **`ALT` + `...`**：选择物体朝向
        + **`Q` / `E`**：循环选择物体类型
        + **`0` ~ `9`**：从调色盘选择物体类型
            + **`SHIFT` + `...`**：设置调色盘的物体类型
        + **`ENTER`**：放置物体
            + **`SHIFT` + `...`**：物体存在时仍放置
            + **`CTRL` + `...`**：设置部分物体的额外信息
        + **`BACKSPACE`**：删除物体
        + **`N`**：新建世界
            + **`ALT` + `...`**：新建关卡
        + **`M`**：删除世界
            + **`ALT` + `...`**：删除关卡
        + **`R`**：设置全局规则
            + **`SHIFT` + `...`**：删除全局规则
        + **`T`**：设置所处世界的标识符
            + **`ALT` + `...`**：设置所处关卡的标识符
        + **`CTRL` + (`X` / `C` / `V`)**：剪切 / 复制 / 粘贴 光标上的物体
        + **`-` / `=`**：循环选择世界
            + **`ALT` + `...`**：循环选择关卡
+ **控制**
    + 添加了`ALT`键的检测。
        + 现在，`SHIFT`用于反转功能的效果；`CTRL`用于指定该功能需要额外的信息；`ALT`用于使用该键位的第二功能，或需要再三确认的功能。
    + _按住的按键又能被多次识别了。_
+ **技术性**
    + **`levelpacks.ReTurnValue`**
        + 重命名为`ReturnInfo`。
    + **`levelpacks.Levelpack.main_level`**
        + 重命名为`main_level_id`。
    + **`objects.Properties.__bool__`**
        + 添加。
        + 存有属性即返回`True`。
+ **漏洞**
    + 修复了无法转换物体的严重漏洞。
    + 修复了`Path`有时无法第一时间更新的漏洞。
    + 修复了许多有关“撤回，重新开始”这两个操作的漏洞。

#### 3.82
该版本更新于 2024.12.04，为程序加入了鼠标操作的支持，并修复了一些漏洞。

+ **游戏**
    + 现在支持鼠标操作：
        + **鼠标左键**：进入世界
        + **鼠标右键**：回到上层世界
        + **鼠标滚轮**：循环选择世界
+ **编辑器**
    + 由于程序现在支持鼠标操作，大量键盘操作转移到鼠标上：
        + **鼠标左键**：放置物体
            + **`SHIFT` + `...`**：即使该位置存在物体也额外放置
            + **`CTRL` + `...`**：设置部分物体的额外信息
            + **`ALT` + `...`**：进入世界
                + **`SHIFT` + `...`**：进入关卡
        + **鼠标右键**：删除物体
            + **`ALT` + `...`**：回到上层世界
                + **`SHIFT` + `...`**：回到上层关卡
        + **鼠标滚轮**：循环选择物体类型
            + **`SHIFT` + 鼠标滚轮向上滚动**：选择该物体的名词
            + **`SHIFT` + 鼠标滚轮向下滚动**：选择该名词指向的物体
            + **`ALT` + `...`**：循环选择世界
                + **`SHIFT` + `...`**：循环选择关卡
        + **(`W` / `S` / `A` / `D`) / 方向键**：选择物体朝向
+ **外观**
    + **名词`PATH`**
        + 现在使用单独的纹理。
+ **技术性**
    + **`objects.World`，`objects.Clone`，和`objects.Level`**
        + 不再直接出现在除`objects.py`以外的源代码内。
            + 不再用重复的代码对`objects.World`和`objects.Clone`两种情况分别进行处理，而改为使用for循环遍历列表`objects.world_pointers`内的元素进行处理；
            + 需要使用`objects.World`来替代`worlds.World`的情况改为使用`objects.default_world_pointer`；
            + `objects.Level`的改变同上，后续更新可能会加入多种不同类型的关卡物体，该版本对此功能进行了预留。
    + **`displays.simple_object_to_surface`和`displays.simple_type_to_surface`**
        + 添加。
        + 用于获取指定物体或物体类型的纹理。
            + 简化了散落在各处的重复渲染代码片段。
    + **`objects.WorldPointer.light_overlay`和`objects.WorldPointer.dark_overlay`**
        + 添加。
        + 指定显示世界时覆盖层的颜色。
    + **`levels.Level.recursion_rules`**
        + 不再改变世界内的本地规则，而改为返回该世界将会从外部世界得到的规则。
+ **漏洞**
    + 修复了与带无限等级的世界有关的严重漏洞。
        + ~~之前的版本测试时都没试过这些游戏内容会不会出漏洞……~~
    + 基本修复了无法转换特殊物体的漏洞。

##### 3.83
该版本更新于 2024.12.05，为物体添加了平滑移动的动画，并改善了程序的性能。

+ **外观**
    + 更改性能相关选项时现在有 5 个等级而非 4 个。
    + 由于该选项过于影响性能，嵌套世界的最大显示深度现在可以单独设置。
    + 现在物体移动时有过渡动画了。
        + 更改选项时对电脑性能的评分 ≥3 即可启用该功能。
            + **技术性**：决定该功能是否启用的选项名为`smooth_animation_multiplier`。
+ **漏洞**
    + 修复了游戏中显示长宽不一致的世界会留下额外黑边的漏洞。
+ **技术性**
    + **`spaces.Coord`**
        + 改为`namedtuple`。
        + 同时加入了`spaces.CoordTuple`用于其他外部用途。
    + **`objects.OldObjectState`**
        + 添加。
        + 记录上一步时物体的状态。
        + 目前并非所有实例属性都被记录或使用。
    + **`objects.BmpObject`**
        + 添加了属性`old_state`，用于记录上文所说的状态。
        + 现在使用`pos: spaces.Coord`而非`x: int`和`y: int`记录坐标。
            + 替代`pos: property`。
        + `sprite_varients`的类型标注改为`tuple[int, ...]`。
    + **`worlds.World`**
        + 现在使用`size: spaces.Coord`而非`width: int`和`height: int`记录坐标。
            + 替代`size: property`。
    + **`refs.LevelID`和`refs.WorldID`**
        + 新增了暂未使用的用于互相转换的实例方法。

### 3.9
**`WORLD IS PARABOX`**更新于 2024.12.06，加入了指向特殊世界物体的名词。

+ **规则**
    + **名词`INFINITY`（∞），`EPSILON`（ε）和`PARABOX`（∅）**
        + 添加。
        + 代表指向悖论世界的物体。
            + 作为属性时，`INFINITY`会使世界物体指向多一层无穷大悖论的世界，`EPSILON`类似；`PARABOX`同时进行前两者的操作。
                + 对其他物体无效果。
        + ~~`PARABOX`的外观（空集符号）是我在熟悉的数学符号里挑的。~~
    + **名词`GROUP`**
        + 添加。
        + 暂未完善机制，会有漏洞。
    + 首次判定无法移动的物体会继续尝试移动，直到可以移动或尝试次数到达某一上限。
        + ~~大概可以算是~~ 修复了同时往相同方向运动的两个相邻物体中，位于后方的物体可能被位于前方的带有“可阻挡物体通过属性”的物体“阻挡”，从而无法在这一轮移动的漏洞。
    + `ALL IS DONE`现在可以触发结局。
+ **外观**
    + 对于更大的显示面积，渲染速度更快了。
    + 最晚在这个版本，编辑器的光标改为白色。
    + 为了规避物体移动过渡动画没有考虑到纹理实际大小的因素，`CURSOR`物体的大小现在与其他物体一致。
        + 这不包括没有过渡动画的编辑器光标。
+ **终端**
    + 现在答案为布尔值的问题可以识别`True`，`False`，`1`，`0`，`是`，`否`这六个回答了。
        + `True`和`False`包括常见大小写形式和英文首字母缩写。
+ **技术性**
    + **`objects.BmpObject`**
        + 重命名为`objects.Object`。
            + ~~我自己都没想到这名字竟然又要被用一遍。~~
        + **`LevelPointer`和`WorldPointer`**
            + 重命名，`Pointer`改为`Object`。
        + **`Noun`**
            + 拆分为`Noun`和派生类`GenericNoun`，后者用于几乎所有可以使用`issubclass`或`isinstance`识别的物体类型。
            + **`SpecialNoun`**
                + 添加，是`Noun`的另一个派生类。
                + 用于不能使用`issubclass`或`isinstance`识别的物体类型。
                    + 直接派生类有`FixedNoun`，`RangedNoun`，和`TextEmpty`。
                        + 间接派生类包括`TextAll`，`TextGroup`，`TextInfinity`等。
                    + 使用类方法`isreferenceof`替代上述内置函数。
            + **`TextLevel`，`TextWorld`，和`TextClone`**
                + 现在继承自新的类型（`TextLevelObject`和`TextWorldObject`）。
    + **`levels.Level.get_move_list`**
        + 合并了部分重复代码。

##### 3.901
该版本更新于 2024.12.07，修复了一个严重漏洞。

+ **漏洞**
    + 修复了普通物体转换时总是会变成名词本身而非该名词对应的物体的严重漏洞。

##### 3.902
该版本更新于 2024.12.07，加入了属性`Hide`的功能。

+ **规则**
    + **属性`HIDE`**
        + 现在可以按预期工作了。
+ **外观**
    + 帧率现在不受`Game`拥有的属性产生的效果的影响。

#### 3.91
**`WORLD IS SPACE`**更新于 2024.12.07，将游戏概念“世界”（`world`）重命名为“空间”（`space`），并因此在代码内更改了许多变量名。

+ **世界**（World）
    + 重命名为**空间**（Space）。
        + 原有的功能（应该）不受影响。
+ **外观**
    + 删除了`world`，`clone`，和`text_world`的纹理。
    + 添加了`text_space`的纹理。
    + 更换了`baba-is-you-original-sprites.zip`，现在其包含`level`的纹理。
+ **技术性**
    + 该版本可读取 3.8 及后续版本的关卡包文件。
        + **然而很可能需要 删除 / 移动 / 重命名 存储选项的文件（`options.json`），因为之前版本中选项的默认值包括`text_world`。**
            + 游戏检测到该文件缺失后，将会在内部重新生成可以正常读取的选项，然后正常运行。此时就可以重新更改选项，游戏关闭时会将选项保存至`options.json`。
    + **`worlds`**
        + 重命名为`spaces`。
    + **`spaces`** ~~现在你叫spaces了，那我叫什么？~~
        + 重命名为`positions`。~~O_o.bmp~~

#### 3.92
**`SPACE IS NOT MORE`**更新于 2024.12.08，使新生成的空间或关卡物体默认指向该物体所在的空间或关卡，加入了对调色盘的支持，重绘了游戏的Logo，并修复了一些漏洞。

+ **规则**
    + **`HAS`，`MAKE`，和`TEXT-`**
        + 通过以上方法生成的并不含有额外信息的空间物体将不再生成新的空间，而会直接指向该物体所在的空间。
            + 原物体拥有空间信息时仍会指向原本所指的空间。
            + `IS`暂不遵循该设定。
            + 关卡同理。
+ **终端**
    + 文件后缀名（如`.json`）现在是可选输入项，而不必在输入时去除。
    + 现在游戏会等到在主菜单内选择非预期选项时自行退出，从而可以在编辑完关卡包之后直接游玩。
        + 程序异常之后仍然会停止运行。
+ **外观**
    + **调色盘**
        + 添加。
        + 游戏现在会通过调色盘，而不是代码内的数值，来获取画面所使用的颜色列表。
    + 略微缩小了**编辑器**的界面。
+ **技术性**
    + 调整了部分选项的默认值（如编辑器创建新空间时的默认大小）。
    + **`levels.Level`**
        + 将`update_rules`移动至`levelpacks.Levelpack`。
            + 同时移除了因为这个改动而变得无用的`levels.Level.rule_list`。
        + 现在支持读取并写入`author`字段，用于标注作者。
            + 编辑器内暂未加入对应操作。
    + **`rules.RuleInfo`**
        + 更改了存储结构，从而修复了许多与解析规则有关的漏洞。
    + **`rules.analysis_rule`**
        + 拆分为执行解析规则任务的函数`rules.get_info_from_rule`和定义规则语法的字典`rules.how_to_match_rule`。
    + **`rules.to_atom_rules`，`spaces.match_pos`**
        + 移除。
    + **`spaces.Space.get_rules_from_pos_and_direct`**
        + 重命名为`get_rule_from_pos_and_direct`。
        + 现在引用上文提到的`rules.how_to_match_rule`，而不是该函数内部的相似内容。
    + **`objects.Object.sprite_color`**
        + 现在存储颜色在调色盘上对应的坐标。
        
#### 3.921
该版本更新于 2024.12.08，更改了物体与空间之间的作用，并修复了一些漏洞。

+ **空间**
    + 现在物体可以到达不存在的空间并“消失”了。
        + 该事件可能因以下情况发生：
            + 物体试图无限退出——或者无限进入——到一个不存在的空间；
            + 物体试图通过某个空间物体进入其对应的空间，但该空间物体所指代的空间本身不存在。
    + 现在当一步移动可能会以一种特定的空间切换方式同时到达多个空间，且某个分支情况失败时，其他移动分支不会被中断了。
        + 仅当所有分支情况都失败时，才会阻止本次移动。
        + 例如，同时进入两个重叠的空间物体时，即使无法进入其中一个空间，也能正常进入另外一个空间。
+ **漏洞**
    + 修复了在游戏内切换调色盘实际上并没有写入选项的漏洞。

#### 3.922
该版本更新于 2024.12.09，临时禁用了一些暂未实现的功能，并修复了一些漏洞。

+ **规则**
    + **名词`EMPTY`和`GROUP`**
        + 不再包含在可使用的物体类型中。
            + 后续更新可能会重新加入。
+ **漏洞**
    + 修复了`space`与`text_space`等空间有关物体，在保存关卡包文件时仍以`world`和`text_world`等旧称被保存的漏洞。
        + 现在游戏只会在读取关卡包文件时兼容旧称了，保存时统一按照新的名称写入。
    + 修复了`ALL`和`NOT ALL`所指的物体与 Baba Is You 中`ALL`所指物体范围的逻辑冲突的漏洞。

#### 3.923
该版本更新于 2024.12.09，修复了一些漏洞。

+ **漏洞**
    + 修复了在编辑器内选择物体对应名词时的某个条件填错而导致名词无法正常选中的漏洞。
    + 修复了一些有关`GAME`的漏洞：
        + 游戏因尝试渲染临时物体`Game`而崩溃；
        + `submp.exe`未经加载调色盘就试图读取纹理而导致崩溃。
+ **技术性**
    + 从选项文件中移除了`fpw`，其在代码内被表达式`fps // 6`替代。

#### 3.924
该版本更新于 2024.12.09，修复了更多有关`GAME`的漏洞。

+ **漏洞**
    + 修复了在上一个版本中赋予属性会导致崩溃的漏洞。
    + 修复了检测`Game`的属性时使用了“该属性是否存在”而非“该属性是否成立”的方式进行判断，从而导致规则中的`NOT`不生效的漏洞。
+ **技术性**
    + **`levels.max_move_count`**
        + 值改为`24`（原本为`10`）。
    + **`levels.infinite_move_number`**
        + 值改为`6`（原本为`10`）。

#### 3.925
该版本更新于 2024.12.23，基本移除了在游戏过程中创建新的空间或关卡的能力，并使`GAME`支持了更多的属性。

+ **规则**
    + 现在通过`IS`生成的缺少额外信息的空间物体将直接指向该物体所在的空间。
        + 关卡同理。
    + **名词`GAME`**
        + 现在支持属性`DEFEAT`，`WORD`，`SELECT`，和`BONUS`了。
+ **外观**
    + **编辑器**内的光标现在会切换颜色了。
+ **漏洞**
    + 修复了与`STOP`物体重叠的`PUSH`物体仍然可以被推动的漏洞。

#### 3.926
该版本更新于 2025.01.05，修复了空间和关卡被转换后原物体不消失的漏洞，部分有关移动的代码逻辑，以及部分渲染平滑移动时出现的漏洞。
+ **技术性**
    + **`levels.MoveInfo`**
        + 现在可以存储更多信息，并使用`refs.SpaceID`（而不是`spaces.Space`）以存储空间信息。
    + **`levels.Level.merge_move_list`**
        + 添加。
        + 用于合并移动信息列表的静态方法。
    + **`levels.Level.move_obj_in_space`和`levels.Level.move_obj_between_spaces`**
        + 移除。
    + **`spaces.Space.auto_refresh`**
        + 添加。
        + 静态修饰器方法，被其修饰的方法在抛出异常时，将会刷新位置索引，然后重新尝试运行一次。

## 4.0
**`ME IS FLIP`**更新于 2025.01.08，加入了与方向相关的属性词。
+ **规则**
    + **属性`UP`，`DOWN`，`LEFT`，`RIGHT`，`TURN`，`DETURN`和`FLIP`**
        + 添加。
        + 用于改变物体朝向，旋转物体，以及翻转物体。
        + 暂时不支持`FACING`，后续版本跟进。
+ **空间**
    + 添加了该版本内新属性词的作用效果。
+ **外观**
    + 暂时移除了平滑动画。
+ **控制**
    + 再次支持通过长按键盘重复输入。
        + 相对于游玩途中，关卡包编辑器内按键的重复速度会更快。
+ **终端**
    + **分隔线**
        + 更改了样式。
            + **技术性**：改为使用新的函数`languages.seperator_line`获取。
+ **技术性**
    + **`positions`**
        + **`turn_left`，`turn_right`和`turn`**
            + 添加。
        + **`Direction.to_bit`和`Direction.to_str`**
            + 添加。
            + 替代`direction_to_bit`和`direction_to_str`。
        + **`PlayerOperation`**
            + 重命名为`NullableDirection`。
        + **`str_to_direction`**
            + 重命名为`str_to_direct`。
        + **`SpaceTransform`及其相关函数**
            + 添加。
            + 用于存储空间物体的变换效果。
    + **`spaces`**
        + **`Space`**
            + **`static_transform`和`dynamic_transform`，及其相关函数**
                + 添加。
            + 重命名了用于计算物体转移后所处位置的函数。
    + **`objects`**
        + **`Object`**
            + 现在初始化物体时会用默认值补全读取`space_object_extra`和`level_object_extra`时缺失的部分了。
            + **`direct_mapping`**
                + 添加。
                + 用于存储物体的非恒定变换效果（如`FLIP`导致的翻转）。
            + **`set_direct_mapping`**
                + 添加。
                + 用于在设置上述属性的同时改变物体方向。
        + **`SpaceObjectExtra`**
            + 现在有实际用途了。
        + `noun_class_list`，`text_class_list`等含有类型的长列表改为在初始化时补全，而非反复调用`list.extend`。
    + **`levelpacks.Levelpack`**
        + **`turn`**
            + 重命名为`tick`。
            + 取消了在`levels.Level.move`和`levels.Level.shift`之间调用的`levels.Level.update_rules`。
        + **`name`和`author`**
            + 改为可选属性。
            + **漏洞**：修复了读取关卡包时没有读取这些字段的漏洞。
    + 对部分过长的代码行进行了换行处理。

##### 4.001
该版本更新于 2025.01.09，添加了进度条，更改了许多位于代码内部或用于关卡包文件中的名称，并修复了两个严重漏洞。

+ **终端**
    + 通过第三方库`tqdm`添加了进度条，目前用于在加载及保存关卡包时显示进度。
        + ~~不过目前几乎所有的关卡包都还没大到需要显示进度条的地步。~~
+ **技术性**
    + 将包名从`BabaMakeParabox`改为`bmp`。
        + 现在使用模块时会带上包名了。
    + 重命名子模块：
        | 旧的名称     | 新的名称    | 重命名的规则 |
        | :----------- | :---------- | :----------- |
        | `basics`     | `base`      | 更换为近义词 |
        | `collects`   | `collect`   | 复数变单数   |
        | `colors`     | `color`     | 复数变单数   |
        | `displays`   | `render`    | 更换为近义词 |
        | `edits`      | `editor`    | 更换为近义词 |
        | `languages`  | `lang`      | 缩写         |
        | `levelpacks` | `levelpack` | 复数变单数   |
        | `levels`     | `level`     | 复数变单数   |
        | `objects`    | `obj`       | 缩写         |
        | `plays`      | `game`      | 更换为近义词 |
        | `positions`  | `loc`       | 更换为近义词 |
        | `refs`       | `ref`       | 复数变单数   |
        | `rules`      | `rule`      | 复数变单数   |
        | `sounds`     | `audio`     | 更换为近义词 |
        | `spaces`     | `space`     | 复数变单数   |
        | `subs`       | `sub`       | 复数变单数   |
    + **`__init__`**
        + 现在只包含`__all__`。
            + 其余所有内容被转移到子模块`execute`。
    + **`loc`**
        + **`Coordinate`**
            + 重命名为`Coord`。
            + 现在是类型别名了（`type Coord[T] = tuple[T, T]`）。
        + **`Direction`**
            + 重命名为`Orient`。
                + ~~`Orient`作为类名的复活赛打赢了！~~
            + 内部值现在使用`int`，而非原本的`str`。
            + 方法`to_str`和`to_bit`被属性`name`和`value`替代。
        + `str_to_direct`和`bit_to_direct`被`Direct.__getitem__`和`Direct.__call__`替代。
    + **`space.Space`**
        + 属性`color`现在可以为`None`了。
            + 此时空间会将目前所用调色盘中用于背景的颜色作为自身的背景颜色。
    + **`obj`**
        + **`Object`**
            + 重命名属性`direct`为`orient`。
            + 更改了`__repr__`方法的返回值。
        + **`SpaceObject.space_object_extra`，`default_space_object_extra`**
            + 重命名，移除了`object`。
                + `SpaceObjectExtra`并没有重命名为`SpaceExtra`。
                + `level`同理。
    + 更改了关卡包存储格式内部分字段的名称。
+ **漏洞**
    + 修复了读取空间时误用`Space.new_obj`以添加物体而导致的漏洞。
    + 修复了进入无穷小空间时，实际方向与预期相反的漏洞。
    + **终端，分割线**：翻译条目不再包含额外的括号。

#### 4.01
**`TEXT WRITE BABA`**更新于 2025.01.18，将常规物体的定义方式从硬编码改为`JSON`文件，并修复了许多严重漏洞。

+ **空间**
    + 现在摄像头不会切换到拥有`HIDE`属性的空间内部了。
        + 这包括鼠标右键和鼠标滚轮。
+ **关卡**
    + 现在可以直接通过含有关卡信息的普通物体进入关卡了。
+ **编辑器**
    + **控制**
        + 现在按住鼠标左键的同时移动鼠标可以连续放置物体了。
            + 右键同理，会连续移除物体。
        + 现在可以通过鼠标中键选取物体类型了。
            + 没有物体时无效。
            + 多个物体重叠在同一位置时会随机选取。
    + 物体调色盘的默认值现在不再包括非硬编码物体。
+ **技术性**
    + **`obj`**
        + **`Object`**
            + 多数物体的定义被移动到[`./data/def/object.json`](./data/def/object.json)。
                + 例外如下：
                    + 文本物体
                    + 指代空间和关卡的物体
                    + 带有默认属性的物体
                        + `Cursor`
                    + 其他带有特殊机制的物体
                        + `Path`
                        + `Game`
                + 名词的定义是可选项。
            + 移除了`display_name`，改为通过方法`get_name`获取译名。
                + 同时将返回物体基本信息的功能从`__repr__`转移至`get_info`。
            + 重命名`sprite_color`为`sprite_palette`，以符合该属性在[v3.92](#392)被更改之后的类型。
            + 物体的渲染方式从独立类型定义改为函数运行分支。
                + 添加了`SpriteCategory`类型。
                + 移除了`Static`，`Tiled`，`AnimatedDirectional`等子类。
        + **`OldObjectState`**
            + 现在也会存储物体的属性了。
                + 因此，移除了曾用于该功能的其他变量和参数。
            + 重命名属性`direct`为`orient`。
        + 重命名大量列表。
    + 将`render.order`用于判断物体是否渲染的功能拆分到新的`valid`函数。
+ **漏洞**
    + 修复了**编辑器**没有初始化`space.Space.object_pos_index`而导致崩溃的严重漏洞。
    + 修复了`SHIFT`和`TELE`导致崩溃的严重漏洞。
    + 修复了`level.Level.meet_infix_conditions`方法内，检测`WITHOUT`时会调用无关且很可能未定义的`find_range`变量，进而导致崩溃的漏洞。
    + 修复了`level.Level.get_move_list`方法内，`stop_objects`在某些分支下可能不会被赋值，进而在引用时导致崩溃的漏洞。
    + 修复了属性`WORD`未能生效的漏洞。

##### 4.011
该版本更新于 2025.01.21，修复了一些漏洞。

+ **技术性**
    + **`space.Space.set_obj_pos`**
        + 添加。
        + 用于在空间内移动物体。
+ **漏洞**
    + 修复了`NOT`作用在名词上会导致崩溃的严重漏洞。
        + 同时修复了有关`ALL`的部分严重漏洞。
    + 修复了`SELECT`使物体的空间位置索引丢失同步而可能导致崩溃的漏洞。

#### 4.02
**`FLAG IS BONUS`**更新于 2025.01.21，使任何常规物体都可作为收集物，并为空间物体添加了视觉上的边框。

+ **规则**
    + **物体`Spore`和`Blossom`，以及与其所对应的名词**
        + 添加。
        + 硬编码物体，条件满足时被自动添加到该关卡包的收集物中。
+ **外观**
    + 空间物体现在会在顶层显示一个两像素宽，半透明，动态的边框纹理（`space`），方便与背景区分。
+ **规则**
    + **收集物**
        + 现在可以分别收集任意带有`BONUS`属性的常规物体，每种物体每个关卡最多一个。
+ **技术性**
    + **`collect`**
        + 移除，部分代码被移至`obj`。
    + 该版本理论上兼容[v4.011](#4011)的关卡包。

##### 4.021
该版本更新于 2025.01.22（仅源代码），优化了游戏的控制操作和视觉提示，并修复了一些漏洞。

+ **游戏**
    + **外观**
        + 现在 `WIN` / `END` / `DONE` / `LEVEL` / `SELECT` 导致游戏暂停时会将窗口显示的画面覆盖上一层自身的颜色，以提示玩家按键以继续。
    + **控制**
        + **编辑器**
            + 现在输入颜色时支持使用调色盘坐标读取颜色了。
        + 新增选项`long_press`，用于详细指定按键连发的速度。
        + 更改所处的关卡或正在查看的空间时，控制台中不再会自动输出新的位置，以避免在连续撤回（`Z`）等类似操作时被这些信息刷屏。
        + **终端**：`TAB`所显示的详细信息中，如果某一段的内容为空，则同样不会显示该段落的标题。
    + 移除了用于设置选项`bgm`的代码。
+ **技术性**
    + **`obj.Object.get_color`**
        + 添加。
        + 用于获取物体颜色，免除了通过调色盘位置手动间接查询的步骤。
    + **`obj.OldObjectState.uid`**
        + 添加。
        + 用于记录物体的`UUID`，以在之后的版本查询其来源。
    + **`obj.Object.display_name`**
        + [v4.01](#401)中残存的类型提示在该版本被移除。
    + 现在读取不存在的纹理时，会将其设置为空白纹理并在终端发出警告，而不是直接报错并退出。
+ **漏洞**
    + 修复了设置关卡图标时错误地使用`Object.json_name`而非`Object.sprite_name`读取纹理而导致崩溃的严重漏洞。
    + 修复了关卡图标的颜色渲染异常的漏洞。
    + 修复了在部分情况下，物体转变为关卡时，没有设置关卡图标的漏洞。
    + 修复了含有`SELECT`属性的物体可以选中自身的漏洞。

#### 4.03
该版本更新于 2025.01.23，更新了与游戏流程相关的机制，并修复了一些漏洞。

+ **游戏**
    + 关卡包现在会记录玩家所处的关卡或正在查看的空间，以及关卡的初始状态了。
    + 关卡现在会在玩家通过该关卡，转换该关卡，以及进入其他关卡时复位。
+ **技术性**
    + **`levelpack.Levelpack.main_level_id`**
        + 重命名为`current_level_id`。
        + 新增属性方法`current_level`，以便使用。
    + **`level.Level.main_space_id`**
        + 重命名为`current_space_id`。
        + 属性方法`main_space`被重命名为`current_space`，且现在支持被赋值，以便使用。
    + **`game.play`**
        + 历史记录现在不再记录所处的关卡或正在查看的空间，上述两个属性接到了这个工作。
        + `current_level`和`current_space`也不再被独立的变量引用。
            + ~~这导致该函数的代码突然变得“密集“了。~~
        + 状态变量`display_refresh`在该版本再次有用。
    + **`level.MapLevelExtraJson.minimum_clear_for_blossom`**
        + 重命名为`spore_for_blossom`。
        + 现在是可选项了。
    + **`levelpack.Levelpack.level_init_state_list`**
        + 添加。
        + 记录关卡的初始状态，用于在通关后重置。
        + 同时添加了相关方法：`levelpack.Levelpack.reset_level`和`levelpack.Levelpack.set_level_init_state`。
    + **用于将`JSON`格式转为类实例的函数**
        + 参数`ver`不再可以为`None`，而是在缺失时赋值为`0.0`。
+ **漏洞**
    + 修复了设置关卡图标颜色时读取了错误的变量而导致崩溃的严重漏洞。
    + 修复了含有`SELECT`属性的物体可以选中处于任何位置的关卡的严重漏洞。
    + 修复了在游戏过程中按`R`重新开始时出现的各种漏洞。

### 4.1
该版本更新于 2025.01.31，更改了关卡包的存储格式与运作方式。
**此版本不兼容使用以前的版本所创建的关卡包。**

+ **编辑器**
    + **漏洞**：修复了许多漏洞。
    + 现在如果不指定详细信息放置关卡物体，其图标纹理将会使用关卡文本的纹理，而图标颜色也将使用关卡文本的颜色。
+ **技术性**
    + 关卡包现在直接存储空间信息（`levelpack.Levelpack.space_dict`），而关卡本体只存储所“包含”的空间标识符。
        + 当关卡本体内部需要用到空间本体的数据时，程序会使用一个随时同步的字典（`level.Level.space_dict`）读取空间本体信息。
    + 关卡信息与空间信息现在使用`dict`存储，以加快游戏运行速度。
    + 添加了用于更新关卡包（及其内部信息）格式的函数接口，但目前并无实际作用。
    + 移除了关卡包方法中的`active_level`参数，以属性`current_level`代之。

##### 4.101
该版本更新于 2025.02.01，更改了选项的存储格式，封装了用于从控制台中输入非字符串类型数据的函数。
**此版本兼容使用以前的版本所创建的选项文件。**

+ **终端**
    + 更新了语言文件，现在会提示用于显示开源协议信息的选项了。
+ **技术性**
    + 在`inst-arch.sh`和`inst-ubuntu.sh`内部添加了之前版本所缺失的下载`PIL`和`tqdm`的步骤。
    + 重命名并整理了选项条目，同时添加了用于更新选项格式的函数，~~这次的函数不像上次的那样没用了~~。
    + **`opt`**
        + 从`base`中分离，用于处理选项相关内容。
    + **`lang`**
        + 重命名了大量函数：
            | 旧的名称         | 新的名称        |
            | :--------------- | :-------------- |
            | `lang_format`    | `fformat`       |
            | `lang_print`     | `fprint`        |
            | `lang_warn`      | `fwarn`         |
            | `lang_inpnt`     | `finpnt`        |
        + 添加了`input_typed_wrapper`，用于生成可以将控制台输入自动转换为非字符串类型并返回的函数（如`input_int`，`input_yes`等）。
            + 这些函数在输入的数据不合理时将会要求用户重新输入。

##### 4.102
该版本更新于 2025.02.02，添加了`ESC`键的功能，使关卡物体和空间物体可以不对应任何关卡和空间，添加了将关卡包的目前状态设为其初始状态的选项，略微更改了空间的存储格式以测试格式更新功能，并修复了一些漏洞。
**此版本不兼容使用[v4.1](#41)之前的版本所创建的关卡包，仅兼容使用[v4.1](#41)及其之后的版本所创建的关卡包。**

+ **游戏**
    + **控制**
        + 现在`ESC`再次可以用来保存关卡进度并回到上层关卡。
    + 大地图关卡现在也会被复位了。
+ **规则**
    + **关卡物体和空间物体**
        + 现在允许“对应本体不存在”的情况了。
+ **终端**
    + 为游戏物体类的生成和贴图的读取加入了进度条。
+ **技术性**
    + 空间存储格式内用于存储物体的列表由`object_list`重命名为`objects`。
    + 添加了更多用于更新关卡包（及其内部信息）格式的函数接口与类型标注。
+ **漏洞**
    + 修复了包括“悖论空间的字体渲染不正确”在内的部分渲染漏洞。